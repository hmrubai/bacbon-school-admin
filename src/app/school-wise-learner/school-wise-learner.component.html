<block-ui>

  <div class="card ">
    <div class="card-header">
      <h2 class="mb-0"><i class="fa fa-users"></i>&nbsp;
        School wise Learners</h2>
    </div>
    <div class="card-body p-0 m-0">
      <ng-container *ngFor="let item of schools">
        <div class="card card-border-default">
          <div class="card-header p-0">
            <div class="alert alert-info p-2 m-0 cursor-pointer" (click)="item.collapsed = !item.collapsed"
              [attr.aria-expanded]="!item.collapsed">
              <button class="btn btn-icon btn-mini"
                [ngClass]="{'btn-success': item.collapsed, 'btn-danger': !item.collapsed }">
                <i class="feather" [ngClass]="{'icon-plus': item.collapsed, 'icon-minus': !item.collapsed }"></i>
              </button> {{item.Name}}
            </div>
            <!-- <h5><i class="fa fa-video"></i> Videos Completed</h5> -->
          </div>
          <div class="card-body p-0 pb-2" id="collapse{{item.ID}}" [collapse]="item.collapsed" [isAnimated]="true">
            
                <div class="row">
                  <div class="col-md-12 col-lg-12 col-12 " *ngFor="let item of item.Classes; let i=index">
    
                    <div class="card " *ngIf = "item.Learners.length>0">
                      <div class="card-header row">
                        <div class="col-md-10 col-12">
                          <h5> <strong>{{item.Name}}</strong> </h5><br>
                          <span> <strong>Total Learners : {{item.Total}}</strong> </span><br>
                          
                        </div>
                        <div class="col-md-2 col-12  text-right">
    
                          <!-- <button class="btn  btn-info btn-mini ml-1 mb-1" (click)="downloadSample(item.ID)" [placement]="'top'"
                        ngbTooltip="Download Excel"  queryParamsHandling="merge">
                        <i class="feather icon-download"></i>
                      </button> -->
                          <!-- <button class="btn btn-info btn-mini ml-1 mb-1"
                            [routerLink]="['/video-contents-seen-details', item.ID]" [placement]="'top'" ngbTooltip="Show All">
                            <i class="fa fa-list"> Show All</i>
                          </button> -->
    
                        </div>
    
    
                      </div>
    
                      <div class="card-body p-0 m-0">
                        <div class="table-responsive">
                          <table class="table table-sm table-hover table-bordered table-striped">
                            <thead>
                              <tr>
                                <th scope="col"># </th>
                                <th scope="col">Name</th>
                                <th scope="col">Class</th>
                                <th scope="col">School</th>
                                <th scope="col">Area</th>
                              
                                <th scope="col">TAB No</th>
                                <th scope="col">Gender </th>
                                <th scope="col">Age </th>
                                <th scope="col">Mobile</th>
                               
                                <th scope="col">Registered On</th>
                                <th scope="col">Details</th>
              
                              </tr>
                            </thead>
              
                            <tbody>
                              <tr *ngFor="let item of item.Learners; let i=index">
                                <!-- <tr *ngFor="let item of TestList.list; let i=index"> -->
              
                                <td>
                                  {{i+1}}
                                </td>
                                <td>
                                  <a class="text-wrap mr-2" target="_blank" [routerLink]="['/learner-details',item.ID]">
                                    <img *ngIf="item.Picture" [src]="baseUrl+item.Picture" class="rounded-circle" width="40"
                                      height="40"   >
                                    <img *ngIf="!item.Picture" src="assets/images/user/user-avatar-blank.png" class="rounded-circle"
                                      width="40" height="40"   >
              
                                  </a>
                                  <a target="_blank" [routerLink]="['/learner-details',item.ID]"class="text-dark">{{item.Name}}</a>
                                  <!-- <ng-template #imgTemplate>
                                      <img *ngIf="item.Picture" [src]="baseUrl+item.Picture" class="rounded-circle" width="100"
                                      height="100"  >
                                    </ng-template> -->
                                </td>
                                <td>
                                  <span class="text-wrap">{{item.Class}}</span>
                                </td>
                                <td>
                                  <span  class="text-wrap">{{item.School}}</span>
                                </td>
                                <td>
                                  <span  class="text-wrap">{{item.Area}}</span>
                                </td>
              
              
                                <td>
                                  <span>{{item.DeviceNo}}</span>
                                </td>
              
                                <td>
                                  <span>{{item.Gender}}</span>
                                </td>
                                <td>
                                  <span>{{item.Age}}</span>
                                </td>
                                <td>
                                  <span>{{item.MobileNo}}</span>
                                </td>
                              
                                <td>
                                  <span>{{item.CreatedOn | amFromUtc | amLocal | amDateFormat: 'DD MMM, YYYY hh:mm A'}}</span>
                                </td>
                                <td>
                                  <a class="btn btn-icon btn-info btn-mini ml-1 mb-1" [placement]="'left'"
                                    ngbTooltip="Show Details" target="_blank" [routerLink]="['/learner-details',item.ID]">
                                    <i class="fa fa-info"></i>
                                </a>
                                </td>
                              </tr>
              
                            </tbody>
              
                          </table>
                        </div>
              
                      </div>
    
    
    
                    </div>
    
                  </div>
                </div>
    
    
             
            </div>
           
        </div>
      </ng-container>


    </div>

  </div>

</block-ui>